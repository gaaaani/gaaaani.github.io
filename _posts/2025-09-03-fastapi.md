---
title: "FastAPIë¡œ ê°œë°œí•˜ê¸°"
date: 2025-09-03 12:00:00 +0900
categories: [Study, FastAPI]
tags: [FastAPI, Python, Uvicorn, Backend]
pin: true
toc: true 
---

## ğŸ—‚ï¸ ëª©ì°¨

1. [intro](#1-intro)  
2. [FastAPIë€](#2-fastapië€)  
3. [ê°œë°œí™˜ê²½](#3-ê°œë°œ-í™˜ê²½)  
4. [ê°€ìƒí™˜ê²½ ì„¤ì •](#4-ê°€ìƒí™˜ê²½-ì„¤ì •)  
5. [app í´ë” ì„¤ì •](#5-app-í´ë”-ì„¤ì •)  
6. [ì„œë²„ ì—°ë™ í™•ì¸](#6-ì„œë²„-ì—°ë™-í™•ì¸)  
7. [ë§ˆë¬´ë¦¬](#ë§ˆë¬´ë¦¬)



---

## 1. intro

2ì°¨ í”„ë¡œì íŠ¸ë¡œ ê¸ˆìœµ ì„œë¹„ìŠ¤ì— LLMì„ ì—°ë™í•˜ê¸° ìœ„í•´ì„œ íŒŒì´ì¬ ì›¹ í”„ë ˆì„ì›Œí¬ê°€ í•„ìš”í–ˆë‹¤.
DRF(Django Rest Framework)ì™€ Flaskë¡œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•´ ë³¸ ê²½í—˜ì´ ìˆì—ˆì§€ë§Œ,  
ë°±ì—”ë“œëŠ” SpringBootë¥¼ ë©”ì¸ìœ¼ë¡œ ê°€ì ¸ê°€ê¸° ìœ„í•´ì„œ FastAPIë¥¼ ì‚¬ìš©í•´ë³´ê³ ì í•œë‹¤.  

ì´ë²ˆ ê¸€ì—ì„œëŠ” ê°€ìƒí™˜ê²½ì„ ë§Œë“¤ê³ , FastAPI ì•±ì„ ë„ìš´ ë’¤, Swagger UI(/docs) ë¡œ APIê°€ ì •ìƒ ë…¸ì¶œë˜ëŠ”ì§€ í™•ì¸í•´ ë³¼ ì˜ˆì •ì´ë‹¤.  
(LLM ì—°ë™ì€ ë‹¤ìŒ ê¸€ì—ì„œ ë‹¤ë£° ì˜ˆì • ğŸ˜‰)


---

## 2. FastAPIë€?

**FastAPI**ëŠ” íŒŒì´ì¬ ê¸°ë°˜ì˜ ì›¹ í”„ë ˆì„ì›Œí¬ë¡œ APIë¥¼ ë§Œë“œëŠ”ë° ì§‘ì¤‘ì ìœ¼ë¡œ ì‚¬ìš©ë˜ë©°, ì´ë¦„ì— ê±¸ë§ê²Œ ë¹ ë¥´ë‹¤ê³  í•œë‹¤.  


### ğŸ” FastAPI ì¥ì 
- **íƒ€ì… ì•ˆì •ì„±**: typing + Pydanticìœ¼ë¡œ ìš”ì²­/ì‘ë‹µ ìŠ¤í‚¤ë§ˆ ê²€ì¦ ìë™  
    - í•¨ìˆ˜ì— íƒ€ì… íŒíŠ¸ë¥¼ ë‹¬ë©´, ê·¸ê±¸ ê·¼ê±°ë¡œ ìš”ì²­ ê²€ì¦ê³¼ ì‘ë‹µ ì§ë ¬í™”ë¥¼ ìë™ìœ¼ë¡œ ì²˜ë¦¬   
    - ëŸ°íƒ€ì„ì‹œ Pydanticì´ ë°ì´í„° íƒ€ì…ì„ ë³€í™˜/ê²€ì¦í•´ ë²„ê·¸ë¥¼ ì´ˆê¸°ì— ì°¨ë‹¨í•´ì¤Œ   
- **ìë™ ë¬¸ì„œí™”** : OpenAPI ìŠ¤í™ â†’ /docs ë°”ë¡œ ìƒì„±  
    - ìë™ìœ¼ë¡œ API ë¬¸ì„œ(ì›¹)ì„ í†µí•´ì„œ ë°”ë¡œ í…ŒìŠ¤íŠ¸ í•  ìˆ˜ ìˆìŒ (Swagger)  
- **ê³ ì„±ëŠ¥/ë¹„ë™ê¸°**: ASGI(Uvicorn)ë¡œ ë™ì‹œì„± ìš°ìˆ˜ 
    - FastAPIëŠ” WSGI(ë™ê¸°) ëŒ€ì‹  ASGI(ë¹„ë™ê¸°) ìŠ¤íƒ(Starlette + Uvicorn)ì„ ì‚¬ìš©   
      I/O ë°”ìš´ë“œ ì‘ì—…(DB, ì™¸ë¶€ API, íŒŒì¼, ìŠ¤íŠ¸ë¦¬ë°)ì— ë™ì‹œì„± ì²˜ë¦¬ ê°•í•¨  
    ** ASGI : íŒŒì´ì¬ ì›¹ ì„œë²„, í”„ë ˆì„ì›Œí¬, ì• í”Œë¦¬ì¼€ì´ì…˜ ê°„ì˜ í†µì‹ ì„ ìœ„í•œ í‘œì¤€ ì¸í„°í˜ì´ìŠ¤  
    - ì—”ë“œí¬ì¸íŠ¸ë¥¼ async defë¡œ ì‘ì„±í•˜ë©´ await ê°€ëŠ¥í•œ í˜¸ì¶œì„ ë…¼ë¸”ë¡œí‚¹ìœ¼ë¡œ ì²˜ë¦¬  
    - ì›¹ì†Œì¼“/ìŠ¤íŠ¸ë¦¬ë°ì—ë„ ê¸°ë³¸ì ìœ¼ë¡œ ê°•í•¨  

---

## 3. ê°œë°œ í™˜ê²½

ì´ ê¸€ì€ Windows ìœ ì €ê°€ ì“´ ê¸€ì´ê¸° ë•Œë¬¸ì— Windows ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŒì„ ë¯¸ë¦¬ ì•Œë¦½ë‹ˆë‹¤.  
- Shell: Git Bash(MINGW64) ë˜ëŠ” PowerShell
- IDE: VS Code
- Python: 3.13.7  
 

---

## 4. ê°€ìƒí™˜ê²½ ì„¤ì •

### ê°€ìƒí™˜ê²½?  
í”„ë¡œì íŠ¸ì˜ íŒ¨í‚¤ì§€ **ë²„ì „ ì¶©ëŒì„ ë§‰ê³ ** **ì˜ì¡´ì„± ì¼ì¹˜**ë¥¼ ë³´ì¥í•˜ê¸° ìœ„í•´ ê°€ìƒí™˜ê²½ì„ ì‚¬ìš©í•¨!  
- ë…ë¦½ëœ ê°œë°œ í™˜ê²½ êµ¬ì„± ê°€ëŠ¥  
- í˜‘ì—…ì‹œ ë²„ì „ ê´€ë¦¬ì— ìš©ì´í•¨  

ì–¸ì–´ëŠ” ë‹¤ë¥´ì§€ë§Œ Spring Bootì—ì„œ ì‚¬ìš©ë˜ëŠ” ì¼ì¢…ì˜ ì˜ì¡´ì„±ì´ë‚˜ ë²„ì „ê´€ë¦¬ ìš©ë„ì¸ pom.xmlì´ë‚˜ build.gradleê³¼ ìœ ì‚¬í•˜ë‹¤ê³  í•  ìˆ˜ ìˆìŒ.  

### ê°€ìƒí™˜ê²½ ì„¤ì •í•˜ê¸°   
- í”„ë¡œì íŠ¸ ë£¨íŠ¸ í´ë”ë¡œ ì´ë™í•´ ê°€ìƒí™˜ê²½ì„ ì„¤ì •í•œë‹¤.  

ë°©ë²•ìœ¼ë¡œ ê°€ìƒí™˜ê²½ .venvë¥¼ ì„¤ì •í•´ì£¼ë©´ êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.  

``` 
venvproj/            # ë£¨íŠ¸í´ë”
â”œâ”€ .venv/            # ê°€ìƒí™˜ê²½
â””â”€ app/
   â”œâ”€ __init__.py
   â””â”€ main.py

```

**ë£¨íŠ¸ í´ë”ì—ì„œ ê°€ìƒí™˜ê²½ ì„¤ì •í•´ì•¼ í•¨!!**   
ë£¨íŠ¸ì—ì„œ ê°€ìƒí™˜ê²½ì„ ì„¤ì •í•´ì•¼ í•œë‹¤. ì˜ëª»ëœ ê²½ë¡œì— í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì!  

```bash
cd ../venvproj        # ë£¨íŠ¸ í´ë”ë¡œ ì´ë™  
python -m venv .venv  #.venvë¼ëŠ” ê°€ìƒí™˜ê²½ ìƒì„±  
# (ì„ íƒ) íŠ¹ì • ë²„ì „ìœ¼ë¡œ ë§Œë“¤ê³  ì‹¶ë‹¤ë©´
# py -3.12 -m venv .venv  

```

.venvì˜ ê°€ìƒí™˜ê²½ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œ venvì˜ Scriptsë¥¼ í™œì„±í™” í•´ì£¼ë©´ ëœë‹¤.  
í™œì„±í™”ë˜ë©´ í”„ë¡¬í¬íŠ¸ ì•ì— (.venv)í‘œì‹œ ìƒê¹€   

```bash
source .venv/Scripts/activate # í™œì„±í™”
deactivate                    # ë¹„í™œì„±í™”
```

ì •ìƒ ë™ì‘ í™•ì¸  
```bash
python -V
pip -V
python -c "import sys; print(sys.executable)"
# ì¶œë ¥ ê²½ë¡œì— .../exproj/.venv/ ê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ OK
```
ê¸°ë³¸ íŒ¨í‚¤ì§€ ì„¤ì¹˜  
pipë¥¼ ìµœì‹  ë²„ì „ìœ¼ë¡œ ì„¤ì¹˜í•˜ê³ , FastAPI ì„œë²„ë¥¼ ìœ„í•œ ìµœì†Œ íŒ¨í‚¤ì§€ ì„¤ì¹˜  
```bash
python -m pip install -U pip 
python -m pip install fastapi "uvicorn[standard]"
```
- uvicorn[standard]: FastAPI ì•±ì„ ì‹¤í–‰í•˜ëŠ” ASGI ì„œë²„  

  
---  

## 5. app í´ë” ì„¤ì •

ë£¨íŠ¸ ê²½ë¡œ ë°‘ì— app í´ë”ë¥¼ ìƒì„±í•œë‹¤.
ì—¬ê¸°ì„œ íŒŒì´ì¬ ì½”ë“œ(ì—”ë“œí¬ì¸íŠ¸), ë¼ìš°í„°, ì˜ˆì œ(JSON)ë¥¼ ê´€ë¦¬í•œë‹¤.  

### ë””ë ‰í„°ë¦¬ êµ¬ì¡°

```
exproj/
â”œâ”€ .venv/
â””â”€ app/
   â”œâ”€ __init__.py
   â”œâ”€ main.py
   â”œâ”€ routers/
   â”‚  â”œâ”€ __init__.py
   â”‚  â””â”€ example.py
   â””â”€ examples/
      â”œâ”€ spending_series.json
      â”œâ”€ advice.json
      â””â”€ index.html

``` 

íŒŒì¼ ìƒì„±ì€ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ë„ ë˜ê³ , ì§ì ‘ ìƒì„±í•´ë„ ëœë‹¤.  
``` bash
mkdir -p app/routers app/examples
:> app/__init__.py
:> app/routers/__init__.py
```

ì•„ë˜ ì½”ë“œë¥¼ ì¶”ê°€í•œ ë’¤ ì„œë²„ë¥¼ ì‹¤í–‰í•´ ì˜ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ì~!  

**app/main.py**
```python
import os
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
from app.routers import example ## ë¼ìš°í„° import

# í™˜ê²½ë³€ìˆ˜ë¡œ API prefixì™€ CORS í—ˆìš© ì˜¤ë¦¬ì§„ì„ ì œì–´
API_PREFIX = os.getenv("API_AI_PREFIX", "/v1")

app = FastAPI(title="Ohgoodpay ML", version="0.1.0")

# CORS ì„¤ì •
app.add_middleware(
    CORSMiddleware,
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# ì˜ˆì‹œ: example.py íŒŒì¼ì— ì‘ì„±í•œ ë¼ìš°í„°
app.include_router(example.router, prefix=API_PREFIX, tags=["example"])

# ê°„ë‹¨ í•‘ ì—”ë“œí¬ì¸íŠ¸ 
@app.get(API_PREFIX + "/ping")
def ping():
    return {"service": "ohgoodpay-ai", "status": "ok"}

```  

**app/routers/example.py**
```python
from fastapi import APIRouter, HTTPException
from fastapi.responses import HTMLResponse, JSONResponse
from pathlib import Path
import json

router = APIRouter()
EXAMPLES_DIR = Path(__file__).resolve().parents[1] / "examples"  # app/examples

def read_json(name: str):
    p = EXAMPLES_DIR / name
    if not p.exists():
        raise HTTPException(404, f"Not found: {p}")
    text = p.read_text(encoding="utf-8-sig").strip()  # BOM í—ˆìš© + ê³µë°± ì œê±°
    if not text:
        raise HTTPException(500, f"{p.name} is empty")
    try:
        return JSONResponse(json.loads(text))
    except json.JSONDecodeError as e:
        raise HTTPException(500, f"JSON parse error in {p.name}: line {e.lineno}, col {e.colno} - {e.msg}")

@router.get("/example", response_class=HTMLResponse)
def example_page():
    idx = EXAMPLES_DIR / "index.html"
    return idx.read_text(encoding="utf-8") if idx.exists() else "<h1>example</h1>"

@router.get("/example/spending/series")
def example_spending_series():
    return read_json("spending_series.json")

@router.get("/example/advice")
def example_advice():
    return read_json("advice.json")

```

**app/examples/spending_series.json**

```json
{
  "userId": "ex",
  "groupBy": "category",
  "labels": ["ì‹ë¹„","êµí†µ","ì‡¼í•‘","êµ¬ë…"],
  "values": [430000, 120000, 310000, 45000],
  "trend": {
    "x": ["2025-06","2025-07","2025-08"],
    "series": {
      "ì‹ë¹„":  [120000,140000,170000],
      "ì‡¼í•‘":  [80000,110000,120000]
    }
  }
}
```

**app/examples/advice.json**

```json
{
  "summary": "ì‡¼í•‘ ì¹´í…Œê³ ë¦¬ ë¹„ì¤‘ì´ ë†’ìŠµë‹ˆë‹¤.",
  "insights": [
    {"title": "ì‡¼í•‘ ì§‘ì¤‘", "detail": "ì „ì²´ BNPLì˜ 52%ê°€ ì‡¼í•‘ì—ì„œ ë°œìƒ", "impact": "down"},
    {"title": "êµ¬ë… ìë™ê²°ì œ", "detail": "BNPL êµ¬ë… 3ê±´ â†’ ì›” 3.2ë§Œì›", "impact": "neutral"}
  ],
  "actions": [
    "ì›” ìƒí•œ 15ë§Œì› ì„¤ì •",
    "ì¥ë°”êµ¬ë‹ˆ 10ë§Œì› ì´ˆê³¼ì‹œ ì•Œë¦¼",
    "êµ¬ë… 1ê±´ í•´ì§€ë¡œ ì›” 1.1ë§Œì› ì ˆê°"
  ]
}


```
  
í™”ë©´ì„ ìœ„í•œ ê°„ë‹¨í•œ html ì‘ì„±  
**app/examples/index.html**  

```html
<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>Ohgoodpay AI example</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, sans-serif; margin: 2rem; }
    .card { padding: 1rem; border: 1px solid #eee; border-radius: 12px; max-width: 720px; }
    ul { line-height: 1.9; }
    code { background:#f6f8fa; padding:.1rem .35rem; border-radius:6px; }
  </style>
</head>
<body>
  <h1>Ohgoodpay AI example</h1>
  <p class="card">
    ë‹¤ìŒ ì—”ë“œí¬ì¸íŠ¸ë¡œ ì˜ˆì‹œ ë°ì´í„°ë¥¼ í™•ì¸í•˜ì„¸ìš”.
    <ul>
      <li><a href="/docs">/docs</a> (OpenAPI)</li>
      <li><a href="/v1/example/advice/series">/v1/example/advice</a></li>
      <li><a href="/v1/example/spending/series">/v1/example/spending/series</a></li>
    </ul>
  </p>
</body>
</html>
```  
---  

## 6. ì„œë²„ ì—°ë™ í™•ì¸  
ìœ„ì˜ ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆìœ¼ë©´ ì„œë²„ ì‹¤í–‰ í›„ ì•„ë˜ ì—”ë“œí¬ì¸íŠ¸ë¡œ ì ‘ê·¼í•´ë³´ì.  
<http://localhost:8000/v1/example>  

![ì„œë²„ ì—°ê²°](/assets/img/fastapi/fast1.png){: width="650" height="450" }  

ì´ì „ì— ì„¤ì •í•œ htmlí™”ë©´ì´ ë‚˜ì˜¤ë©´  
ì„œë²„ ì—°ê²°ì´ ì˜ ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.  

### ê° ë¼ìš°í„° ê²½ë¡œ í™•ì¸  
ìš°ì„  adviceì™€ spending/seriesë¡œ ê°ê° ì§„ì…í•´ë³´ë©´  

**advice.json** ì„¤ì • í™”ë©´ì´ ë‚˜ì˜¤ê³ ,  
![ì¡°ì–¸ì œì´ìŠ¨](/assets/img/fastapi/fast2.png){: width="650" height="450" }  
**spending_series.json** ì„¤ì • í™”ë©´ì´ ë‚˜ì˜¨ë‹¤.  
![ì‚¬ìš©ëŸ‰ì œì´ìŠ¨](/assets/img/fastapi/fast3.png){: width="650" height="450" }  

### docs   
ë§ˆì§€ë§‰ìœ¼ë¡œ /docs ì—”ë“œí¬ì¸íŠ¸ë¡œ ì ‘ê·¼í•˜ë©´,  
Swagger uiê°€ ë‚˜ì˜¤ë©´ì„œ ê°„ë‹¨í•˜ê²Œ API í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆë‹¤!  
![ìŠ¤ì›¨ê±°ë…ìŠ¤](/assets/img/fastapi/fast4.png){: width="650" height="450" }  

  
í•˜ë‚˜ë§Œ ì˜ˆì‹œë¡œ í™•ì¸í•´ë³´ì, **Try it out** ì„ ëˆŒëŸ¬, Executeí•´ë³´ë©´  
ì•„ë˜ì™€ ê°™ì´ API í…ŒìŠ¤íŠ¸ê°€ ì§„í–‰ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤!!  
![ìŠ¤ì›¨ê±°ë…ìŠ¤](/assets/img/fastapi/fast5.png){: width="650" height="450" }   
![ìŠ¤ì›¨ê±°ë…ìŠ¤](/assets/img/fastapi/fast6.png){: width="650" height="450" }  

  

**ì£¼ì˜**  
>uvicorn not found â†’ venv í™œì„±í™” í›„ python -m uvicorn ...  
>ModuleNotFoundError: app â†’ ë£¨íŠ¸ì—ì„œ ì‹¤í–‰ + app/__init__.py í™•ì¸  
  
---  

## ë§ˆë¬´ë¦¬  
  
ë¡œì»¬ì—ì„œ FastAPI + Swaggerë¥¼ í™•ì¸í•˜ëŠ” ìµœì†Œ í™˜ê²½ì„ ì™„ì„±í–ˆë‹¤.
ë‚¨ì€ ê±´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ LLM ì—°ë™ğŸ«¡   
ë‹¤ìŒ ê¸€ì—ì„œ ì´ì–´ê°€ë„ë¡ í•˜ê² ë‹¤. ~~ë¹¨ë¦¬ ì˜¤ê² ìŒ.~~  

![íˆ¬ë¹„ì»¨í‹°ë‰´](/assets/img/dasimanna.png){: width="350" height="250" }  